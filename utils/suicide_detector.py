# utils/suicide_detector.py

# üîπ –†–∏—Å–∫ –ø—Ä–∏—á–∏–Ω–∏—Ç—å –≤—Ä–µ–¥ —Å–µ–±–µ
SELF_HARM_KEYWORDS = [
    "—Å–º–µ—Ä—Ç—å", "—É–º–µ—Ä–µ—Ç—å", "—É–º–∏—Ä–∞—é", "—Ö–æ—á—É —É–º–µ—Ä–µ—Ç—å", "–Ω–µ —Ö–æ—á—É –∂–∏—Ç—å",
    "–ø–æ–∫–æ–Ω—á–∏—Ç—å —Å —Å–æ–±–æ–π", "—Å–∞–º–æ—É–±–∏–π—Å—Ç–≤–æ", "–Ω–µ—Ç —Å–º—ã—Å–ª–∞ –∂–∏—Ç—å",
    "–∂–∏–∑–Ω—å –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–∞", "–∫–æ–Ω–µ—Ü", "–ø—Ä–æ—â–∞–π",
    "–ø–æ—Ä–µ–∑–∞—Ç—å –≤–µ–Ω—ã", "–≤—Å–∫—Ä—ã—Ç—å", "—Ç–∞–±–ª–µ—Ç–æ–∫ –Ω–∞–≥–ª–æ—Ç–∞—Ç—å—Å—è", "–ø–æ–≤–µ—Å–∏—Ç—å—Å—è",
    "–±—Ä–æ—Å–∏—Ç—å—Å—è –ø–æ–¥ –ø–æ–µ–∑–¥", "–±—Ä–æ—Å–∏—Ç—å—Å—è –ø–æ–¥ –º–∞—à–∏–Ω—É", "–ø—Ä—ã–≥–Ω—É—Ç—å —Å –∫—Ä—ã—à–∏",
    "–∑–∞–¥–æ—Ö–Ω—É—Ç—å—Å—è", "—É—Ç–æ–ø–∏—Ç—å—Å—è",
    "–Ω–µ–Ω–∞–≤–∏–∂—É —Å–µ–±—è", "—è –Ω–∏—á—Ç–æ–∂–µ—Å—Ç–≤–æ", "–Ω–∏–∫–æ–º—É –Ω–µ –Ω—É–∂–µ–Ω", "—É—Å—Ç–∞–ª –∂–∏—Ç—å",
    "–Ω–µ –≤–∏–∂—É –≤—ã—Ö–æ–¥–∞", "–Ω–µ —Ö–æ—á—É –ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è", "–≤—Å—ë –¥–æ—Å—Ç–∞–ª–æ", "–±–æ–ª—å–Ω–æ –∂–∏—Ç—å",
]

# üîπ –†–∏—Å–∫ –ø—Ä–∏—á–∏–Ω–∏—Ç—å –≤—Ä–µ–¥ –¥—Ä—É–≥–∏–º
AGGRESSION_KEYWORDS = [
    "—É–±–∏—Ç—å", "—Ö–æ—á—É —É–±–∏—Ç—å", "—Ä–∞—Å–ø—Ä–∞–≤–∏—Ç—å—Å—è", "–≤–∑–æ—Ä–≤–∞—Ç—å", "–∑–∞—Ä–µ–∑–∞—Ç—å",
    "–æ—Ç–æ–º—Å—Ç–∏—Ç—å", "–≤—Å–µ—Ö —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å", "–ø—Ä–∏—á–∏–Ω–∏—Ç—å –±–æ–ª—å",
]

# üîπ –†–∏—Å–∫ –∏–≥—Ä–æ–≤–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
GAMBLING_KEYWORDS = [
    "–∫–∞–∑–∏–Ω–æ", "–∏–≥—Ä–æ–≤—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã", "–∞–≤—Ç–æ–º–∞—Ç—ã", "—Å–ª–æ—Ç—ã", "—Ä—É–ª–µ—Ç–∫–∞",
    "–ø–æ–∫–µ—Ä", "–∫–∞—Ä—Ç—ã", "–±–∏–Ω–≥–æ", "—Å—Ç–∞–≤–∫–∏", "–±—É–∫–º–µ–∫–µ—Ä", "–±—É–∫–º–µ–∫–µ—Ä—Å–∫–∞—è –∫–æ–Ω—Ç–æ—Ä–∞",
    "–ª—É–¥–æ–º–∞–Ω", "–ª—É–¥–æ–º–∞–Ω–∏—è", "–∏–≥—Ä–æ–º–∞–Ω–∏—è",
    "–ø—Ä–æ–∏–≥—Ä–∞–ª –≤—Å—ë", "—Å–ø—É—Å—Ç–∏–ª –¥–µ–Ω—å–≥–∏", "–ø—Ä–æ–∏–≥—Ä–∞–ª –∫–≤–∞—Ä—Ç–∏—Ä—É",
    "—Ö–æ—á—É –æ—Ç—ã–≥—Ä–∞—Ç—å—Å—è", "–æ—Ç—ã–≥—Ä–∞—é—Å—å", "–≤–µ—Ä–Ω—É—Ç—å –¥–µ–Ω—å–≥–∏",
    "–≤ –¥–æ–ª–≥–∞—Ö", "–∑–∞–¥–æ–ª–∂–∞–ª", "–∫—Ä–µ–¥–∏—Ç—ã –∏–∑-–∑–∞ –∏–≥—Ä—ã",
]

def detect_risk(text: str):
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ç—Ä–µ–≤–æ–∂–Ω—ã—Ö —Å–ª–æ–≤/—Ñ—Ä–∞–∑.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç (risk_type, excerpt):
      - "self"       ‚Üí —Ä–∏—Å–∫ —Å–µ–±–µ
      - "aggression" ‚Üí —Ä–∏—Å–∫ –¥—Ä—É–≥–∏–º
      - "gambling"   ‚Üí –∏–≥—Ä–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
      - None         ‚Üí —Ä–∏—Å–∫–∞ –Ω–µ—Ç
    """
    lower_text = text.lower()

    for phrase in SELF_HARM_KEYWORDS:
        if phrase in lower_text:
            return "self", phrase

    for phrase in AGGRESSION_KEYWORDS:
        if phrase in lower_text:
            return "aggression", phrase

    for phrase in GAMBLING_KEYWORDS:
        if phrase in lower_text:
            return "gambling", phrase

    return None, ""
